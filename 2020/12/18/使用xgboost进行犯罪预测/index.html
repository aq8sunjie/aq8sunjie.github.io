<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><title itemprop="name">使用xgboost进行犯罪预测 | 一只傻老杰の博客</title><link rel="shortcut icon" href="/images/favicon.ico"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all"><link rel="stylesheet" href="/css/lib.min.css" media="all"><link rel="stylesheet" href="/css/font.css" media="all"><link rel="stylesheet" href="/css/insight.css" media="all"><link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all"><link rel="stylesheet" href="/css/zoom.css" media="all"><link rel="stylesheet" type="text/css" href="/css/sharejs.css"><script>var mashiro_option=new Object,mashiro_global=new Object;mashiro_option.NProgressON=!0,mashiro_option.email_domain="",mashiro_option.email_name="",mashiro_option.cookie_version_control="",mashiro_option.qzone_autocomplete=!1,mashiro_option.site_name="さくら荘その老杰のBlog",mashiro_option.author_name="老杰のBlog",mashiro_option.site_url="https://aq8sunjie.github.io",mashiro_option.v_appId="",mashiro_option.v_appKey="",mashiro_option.mathjax="0",mashiro_option.qq_api_url="https://api.mashiro.top/qqinfo/",mashiro_option.qq_avatar_api_url="https://api.mashiro.top/qqinfo/"</script><script type="text/javascript">var bg="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/01.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/02.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/03.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/04.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/05.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/06.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/07.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/08.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/09.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/10.webp,https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/11.webp".split(","),bgindex=Math.floor(Math.random()*bg.length);(window.ActiveXObject||"ActiveXObject"in window)&&alert("朋友，IE浏览器未适配哦~")</script><style type="text/css">.hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}</style><style type="text/css">.site-top .lower nav{display:block!important}#pagination a:hover,.author-profile i,.float-content i:hover,.post-content a:hover,.post-like a,.post-more i:hover,.post-share .show-share,.sub-text,.we-info a,span.sitename{color:#fe9600}.ar-time i,.comment .comment-reply-link,.download,.feature i,.links ul li:before,.navigator i:hover,.object,.siren-checkbox-radio:checked+.siren-checkbox-radioInput:after,span.ar-circle{background:#fe9600}::-webkit-scrollbar-thumb{background:#fe9600}#pagination a:hover,.comment-respond input[type=submit]:hover,.download,.link-title,.links ul li:hover,.navigator i:hover{border-color:#fe9600}#archives-temp h3,#comments-navi a.next,#comments-navi a.prev,.comment h4 a,.comment h4 a:hover,.comment-respond input[type=submit]:hover,.entry-content a:hover,.entry-title a:hover,.site-info a:hover,.site-title a:hover,.site-top ul li a:hover,.sorry li a:hover,i.iconfont.js-toggle-search.iconsearch:hover,span.page-numbers.current{color:#fe9600}.comments .comments-main{display:block!important}.comments .comments-hidden{display:none!important}</style><script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><script src="/live2d-widget/autoload.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="一只傻老杰の博客" type="application/atom+xml"></head><body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit"><div class="scrollbar" id="bar"></div><a href="#" class="cd-top faa-float animated"></a><section id="main-container"><div class="headertop filter-dot"><div id="banner_wave_1"></div><div id="banner_wave_2"></div><figure id="centerbg" class="centerbg"><div class="focusinfo no-select"><div class="header-tou"><a target="_blank" rel="noopener" href="https://aq8sunjie.github.io"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/touxiang/logo.jpg"></a></div><div class="header-info"><p>我在最没有能力的年纪，碰见了最想照顾一生的人</p><div class="top-social_v2"><li id="bg-pre"><img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg"></li><li><a href="https://github.com/aq8sunjie" target="_blank" class="social-github" title="github"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/social/github.png"></a></li><li><a href="https://weibo.com/6499966482/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo" target="_blank" class="social-github" title="sina"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/social/sina.png"></a></li><li><a href="https://music.163.com/#/user/home?id=392795289" target="_blank" class="social-github" title="wangyiyun"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/social/wangyiyun.png"></a></li><li><a href="https://www.zhihu.com/people/thejie-kai-sen" target="_blank" class="social-github" title="zhihu"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/social/zhihu.png"></a></li><li><a href="https://mail.qq.com/" target="_blank" class="social-github" title="email"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/social/email.svg"></a></li><li class="wechat"><a href="/#"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/social/qq.png"></a><div class="wechatInner"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/custom/QQ(1).PNG"></div></li><li class="wechat"><a href="/#"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/social/wechat.png"></a><div class="wechatInner"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/custom/WeChat.PNG"></div></li><li id="bg-next"><img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg"></li></div></div></div></figure><div id="video-container"><video style="object-fit:fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto"></video><div id="video-btn" class="loadvideo videolive"></div><div id="video-add"></div><div class="video-stu"></div></div><div class="headertop-down faa-float animated" onclick="headertop_down()"><span><i class="fa fa-chevron-down" aria-hidden="true"></i></span></div></div><div id="page" class="site wrapper"><header class="site-header no-select gizle sabit" role="banner"><div class="site-top"><div class="site-branding"><span class="site-title"><span class="logolink moe-mashiro"><a href="/"><span class="sakurasono">さくら荘その</span> <span class="shironeko">老杰のBlog</span></a></span></span></div><div class="searchbox search-form-submit"><i class="iconfont js-toggle-search iconsearch icon-search"></i></div><div id="show-nav" class="showNav mobile-fit"><div class="line line1"></div><div class="line line2"></div><div class="line line3"></div></div><div class="lower-cantiner"><div class="lower"><nav class="mobile-fit-control hide"><ul id="menu-new" class="menu"><li><a href="/"><span class="faa-parent animated-hover"><i class="fa fa-fort-awesome faa-shake" aria-hidden="true"></i> 首页</span></a></li><li><a href="/archives"><span class="faa-parent animated-hover"><i class="fa fa-archive faa-shake" aria-hidden="true"></i> 归档</span></a><ul class="sub-menu"><li><a href="/categories/%E6%8A%80%E6%9C%AF/"><i class="fa fa-code" aria-hidden="true"></i> 技术</a></li><li><a href="/categories/%E7%94%9F%E6%B4%BB/"><i class="fa fa-file-text-o" aria-hidden="true"></i> 生活</a></li><li><a href="/categories/%E8%B5%84%E6%BA%90/"><i class="fa fa-cloud-download" aria-hidden="true"></i> 资源</a></li><li><a href="/categories/%E9%9A%8F%E6%83%B3/"><i class="fa fa-commenting-o" aria-hidden="true"></i> 随想</a></li><li><a href="/categories/%E8%BD%AC%E8%BD%BD/"><i class="fa fa-book" aria-hidden="true"></i> 转载</a></li></ul></li><li><a href="javascript:;"><span class="faa-parent animated-hover"><i class="fa fa-list-ul faa-vertical" aria-hidden="true"></i> 清单</span></a><ul class="sub-menu"><li><a href="/bangumi/"><i class="fa fa-film faa-vertical" aria-hidden="true"></i> 番组</a></li><li><a href="/music/"><i class="fa fa-headphones" aria-hidden="true"></i> 歌单</a></li><li><a href="/photos/"><i class="fa fa-photo" aria-hidden="true"></i> 图集</a></li></ul></li><li><a href="/comment/"><span class="faa-parent animated-hover"><i class="fa fa-pencil-square-o faa-tada" aria-hidden="true"></i> 留言板</span></a></li><li><a href="/links/"><span class="faa-parent animated-hover"><i class="fa fa-link faa-shake" aria-hidden="true"></i> 友人帐</span></a></li><li><a href="/donate/"><span class="faa-parent animated-hover"><i class="fa fa-heart faa-pulse" aria-hidden="true"></i> 赞赏</span></a></li><li><a href="/"><span class="faa-parent animated-hover"><i class="fa fa-leaf faa-wrench" aria-hidden="true"></i> 关于</span></a><ul class="sub-menu"><li><a href="/about/"><i class="fa fa-meetup" aria-hidden="true"></i> 我？</a></li></ul></li><li><a href="/atom.xml"><span class="faa-parent animated-hover"><i class="fa fa-rss faa-pulse" aria-hidden="true"></i> RSS</span></a></li></ul></nav></div></div></div></header><link rel="stylesheet" type="text/css" href="/css/sharejs.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css"><div class="pattern-center-blank"></div><div class="pattern-center single-center"><div class="pattern-attachment-img lazyload" style="background-image:url(https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/20201218094250.png)" src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/20201218094250.png"></div><header class="pattern-header single-header"><h1 class="entry-title">使用xgboost进行犯罪预测</h1><p class="entry-census"><span><a href=""><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/touxiang/logo.jpg"> </a></span><span><a href="">一只傻老杰</a> </span><span class="bull">·</span> 2020-12-18<span class="bull"> ·</span> <span id="busuanzi_value_page_pv"></span>次阅读</p><div style="margin-top:10px"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i> <span class="post-meta-item-text">字数统计: </span><span class="post-count">1.8k字</span> </span></span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i> <span class="post-meta-item-text">阅读时长: </span><span class="post-count">8分</span></span></span></div></header></div><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main" role="main"><article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized"><div class="toc"></div><div class="entry-content"><h1 id="使用xgboost进行犯罪预测"><a href="#使用xgboost进行犯罪预测" class="headerlink" title="使用xgboost进行犯罪预测"></a>使用xgboost进行犯罪预测</h1><p>事出有因，为了图毕业设计指导老师方面，于是选择了预测波士顿犯罪这个项目。但是这对于机器学习只学习了一个月的我来说不是很难也不是很容易，于是就有了这篇文章，来记录一下我的学习历程。</p><p><img src="https://cdn.jsdelivr.net/gh//aq8sunjie/cdn@main/img/cover/5WUCQ2O80L.jpg"></p><p>我之前用决策树，高斯算法，K临，随机森林这几个算法来预测，除了随机森林的效果相对于前几个算法来说相对叫高，但基本默认参数下预测的，结果如下</p><p><img src="https://cdn.jsdelivr.net/gh//aq8sunjie/cdn@main/img/cover/image-20201218085010076.png"></p><p>结果就一般般吧。。。。。。。。。。。。。。。</p><p><img src="https://cdn.jsdelivr.net/gh//aq8sunjie/cdn@main/img/cover/J040.jpg"></p><p>但是在我小jojo的知道下，我知道了一个神秘的算法——xgboost</p><p>什么是xgboost呢 见下图</p><p><img src="https://cdn.jsdelivr.net/gh//aq8sunjie/cdn@main/img/cover/image-20201218085543058.png" alt="image-20201218085543058"></p><p>原理这里没时间解释了，毕竟我毕设论文还没写完。到时候在补充一篇吧。</p><p>首先来看原始数据文件类型</p><p><img src="https://cdn.jsdelivr.net/gh//aq8sunjie/cdn@main/img/cover/image-20201218085726623.png" alt="image-20201218085726623"></p><p>大致看一下就好，我这边列出了所有的列名</p><p><img src="https://cdn.jsdelivr.net/gh//aq8sunjie/cdn@main/img/cover/image-20201218085915999.png" alt="image-20201218085915999"></p><p>可以看到犯罪数据有17个类别，我们需要根据现有的数据来预测一下犯罪类型，UCR_PART，地区。</p><p>数据的分类，特征的选择我在之前的预测就已经选好了，这里先不做多的叙述</p><p>直接看代码吧，我基本都标识了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">r&#x27;C:\Users\13975\Downloads\crime.csv&#x27;</span>,encoding=<span class="string">&#x27;gbk&#x27;</span>,low_memory=<span class="literal">False</span>)</span><br><span class="line">data = data.drop(<span class="string">&#x27;INCIDENT_NUMBER&#x27;</span>,axis=<span class="number">1</span>)<span class="comment">#删除第一列无用数据 事件编号</span></span><br><span class="line">data[<span class="string">&#x27;SHOOTING&#x27;</span>].fillna(<span class="number">0</span>, inplace = <span class="literal">True</span>)</span><br><span class="line">data[<span class="string">&#x27;SHOOTING&#x27;</span>] = data[<span class="string">&#x27;SHOOTING&#x27;</span>].<span class="built_in">map</span>(&#123; <span class="number">0</span>: <span class="number">0</span>,<span class="string">&#x27;Y&#x27;</span>:<span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure><p>这里我将SHOOTING列进行了一个转换，原本列数据只有空值和Y，将他处理成一个特征，以便于接下来的预测。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建新的特征列</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>] = <span class="number">0</span></span><br><span class="line">data[<span class="string">&#x27;Night&#x27;</span>] = <span class="number">0</span></span><br><span class="line"><span class="comment">#根据官方数据按小时将一天划分成白天和黑夜</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">1</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">6</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">18</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">2</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">6</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">19</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">3</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">6</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">20</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">4</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">5</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">20</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">5</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">5</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">21</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">6</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">4</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">21</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">7</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">5</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">21</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">8</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">5</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">21</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">9</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">6</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">20</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">10</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">6</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">19</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">11</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">6</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">17</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Day&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] == <span class="number">12</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &gt;= <span class="number">7</span>) &amp; (data[<span class="string">&#x27;HOUR&#x27;</span>] &lt;= <span class="number">17</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;Night&#x27;</span>].loc[data[<span class="string">&#x27;Day&#x27;</span>]==<span class="number">0</span>]=<span class="number">1</span></span><br></pre></td></tr></table></figure><p>这里是考虑到犯罪可能与光照方面有问题，这边对白天黑夜进行一个分类，成为一个新的特征列</p><p>数据标准是选择于世界日期及时间网</p><p><a target="_blank" rel="noopener" href="http://www.timeanddate.com/">www.timeanddate.com</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新增特征季节</span></span><br><span class="line">data[<span class="string">&#x27;Season&#x27;</span>] = <span class="number">0</span></span><br><span class="line">data[<span class="string">&#x27;Season&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>] &lt; <span class="number">3</span>) | (data[<span class="string">&#x27;MONTH&#x27;</span>] &gt;= <span class="number">12</span>)] = <span class="number">1</span> <span class="comment">#冬季</span></span><br><span class="line">data[<span class="string">&#x27;Season&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>]&gt;= <span class="number">3</span>) &amp; (data[<span class="string">&#x27;MONTH&#x27;</span>] &lt; <span class="number">6</span>)] = <span class="number">2</span> <span class="comment">#春季</span></span><br><span class="line">data[<span class="string">&#x27;Season&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>]&gt;= <span class="number">6</span>) &amp; (data[<span class="string">&#x27;MONTH&#x27;</span>] &lt; <span class="number">9</span>)] = <span class="number">3</span> <span class="comment">#夏季</span></span><br><span class="line">data[<span class="string">&#x27;Season&#x27;</span>].loc[(data[<span class="string">&#x27;MONTH&#x27;</span>]&gt;= <span class="number">9</span>) &amp; (data[<span class="string">&#x27;MONTH&#x27;</span>] &lt;<span class="number">12</span>)] = <span class="number">4</span> <span class="comment">#秋季</span></span><br><span class="line"><span class="comment"># print(data.Season)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#新增特征是否为周六日</span></span><br><span class="line">data[<span class="string">&#x27;dayofweek&#x27;</span>] = <span class="number">0</span></span><br><span class="line">data[<span class="string">&#x27;dayofweek&#x27;</span>].loc[(data[<span class="string">&#x27;DAY_OF_WEEK&#x27;</span>] == <span class="string">&#x27;Saturday&#x27;</span>)] = <span class="number">1</span></span><br><span class="line">data[<span class="string">&#x27;dayofweek&#x27;</span>].loc[(data[<span class="string">&#x27;DAY_OF_WEEK&#x27;</span>] == <span class="string">&#x27;Sunday&#x27;</span>)] = <span class="number">1</span></span><br></pre></td></tr></table></figure><p>考虑到之前犯罪案件的数量在月份和星期的柱状图中显示，犯罪数量和季节，是否为节假日有关，这里再次新增两个特征</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#取出需要的特征列</span></span><br><span class="line">data = data.loc[:,[<span class="string">&#x27;OFFENSE_CODE&#x27;</span>, <span class="string">&#x27;OFFENSE_CODE_GROUP&#x27;</span>,<span class="string">&#x27;OFFENSE_DESCRIPTION&#x27;</span>, <span class="string">&#x27;DISTRICT&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;REPORTING_AREA&#x27;</span>, <span class="string">&#x27;SHOOTING&#x27;</span>, <span class="string">&#x27;YEAR&#x27;</span>,<span class="string">&#x27;MONTH&#x27;</span>,<span class="string">&#x27;Season&#x27;</span>,<span class="string">&#x27;DAY_OF_WEEK&#x27;</span>,<span class="string">&#x27;dayofweek&#x27;</span>, <span class="string">&#x27;HOUR&#x27;</span>, <span class="string">&#x27;UCR_PART&#x27;</span>, <span class="string">&#x27;STREET&#x27;</span>,<span class="string">&#x27;Day&#x27;</span>,<span class="string">&#x27;Night&#x27;</span>,<span class="string">&#x27;Lat&#x27;</span>,<span class="string">&#x27;Long&#x27;</span>]]</span><br><span class="line"><span class="comment">#将特征数据进行数字化</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"></span><br><span class="line">data.loc[:,<span class="string">&#x27;OFFENSE_CODE_GROUP&#x27;</span>] = LabelEncoder().fit_transform(data.loc[:,<span class="string">&#x27;OFFENSE_CODE_GROUP&#x27;</span>])</span><br><span class="line">data.loc[:,<span class="string">&#x27;OFFENSE_DESCRIPTION&#x27;</span>] = LabelEncoder().fit_transform(data.loc[:,<span class="string">&#x27;OFFENSE_DESCRIPTION&#x27;</span>])</span><br><span class="line">data.loc[:,<span class="string">&#x27;REPORTING_AREA&#x27;</span>] = LabelEncoder().fit_transform(data.loc[:,<span class="string">&#x27;REPORTING_AREA&#x27;</span>].astype(<span class="string">&#x27;str&#x27;</span>)).astype(<span class="string">&#x27;int&#x27;</span>)</span><br><span class="line">data.loc[:,<span class="string">&#x27;DISTRICT&#x27;</span>] = LabelEncoder().fit_transform(data.loc[:,<span class="string">&#x27;DISTRICT&#x27;</span>].astype(<span class="string">&#x27;str&#x27;</span>)).astype(<span class="string">&#x27;int&#x27;</span>)</span><br><span class="line">data.loc[:,<span class="string">&#x27;DAY_OF_WEEK&#x27;</span>] = LabelEncoder().fit_transform(data.loc[:,<span class="string">&#x27;DAY_OF_WEEK&#x27;</span>].astype(<span class="string">&#x27;str&#x27;</span>)).astype(<span class="string">&#x27;int&#x27;</span>)</span><br><span class="line">data.loc[:,<span class="string">&#x27;UCR_PART&#x27;</span>] = LabelEncoder().fit_transform(data.loc[:,<span class="string">&#x27;UCR_PART&#x27;</span>].astype(<span class="string">&#x27;str&#x27;</span>)).astype(<span class="string">&#x27;int&#x27;</span>)</span><br><span class="line">data.loc[:,<span class="string">&#x27;STREET&#x27;</span>] = LabelEncoder().fit_transform(data.loc[:,<span class="string">&#x27;STREET&#x27;</span>].astype(<span class="string">&#x27;str&#x27;</span>)).astype(<span class="string">&#x27;int&#x27;</span>)</span><br><span class="line">data.fillna(<span class="number">0</span>,inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>对所需的特征列进行提取，并使用LabelEncoder函数进行数字化</p><p>这一系列处理完，就可以对数据进行一个预测了</p><p>在特征的选择上，我使用了皮尔森相关系数来选择特征</p><p>皮尔逊相关系数<strong>——</strong>Pearson correlation coefficient，用于度量两个变量之间的相关性，其值介于-1与1之间，值越大则说明相关性越强。</p><p><img src="https://cdn.jsdelivr.net/gh//aq8sunjie/cdn@main/img/cover/image-20201218092036205.png" alt="image-20201218092036205"></p><p>然后就开始我们的预测</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">train,test = train_test_split(data)</span><br><span class="line"><span class="comment"># feature_columns = [ &#x27;DISTRICT&#x27;,&#x27;REPORTING_AREA&#x27;, &#x27;SHOOTING&#x27;, &#x27;YEAR&#x27;,&#x27;MONTH&#x27;,&#x27;Season&#x27;,&#x27;DAY_OF_WEEK&#x27;,&#x27;dayofweek&#x27;, &#x27;HOUR&#x27;, &#x27;UCR_PART&#x27;,&#x27;STREET&#x27;,&#x27;Day&#x27;,&#x27;Night&#x27;,&#x27;Lat&#x27;,&#x27;Long&#x27;]</span></span><br><span class="line"><span class="comment"># target_column = &#x27;OFFENSE_CODE_GROUP&#x27;</span></span><br><span class="line"><span class="comment"># 正确率为35.657373 %</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># feature_columns = [ &#x27;OFFENSE_CODE_GROUP&#x27;, &#x27;SHOOTING&#x27;,&#x27;MONTH&#x27;,&#x27;Season&#x27;,&#x27;DAY_OF_WEEK&#x27;,&#x27;dayofweek&#x27;, &#x27;HOUR&#x27;, &#x27;UCR_PART&#x27;,&#x27;Day&#x27;,&#x27;Night&#x27;]</span></span><br><span class="line"><span class="comment"># target_column = &#x27;DISTRICT&#x27;</span></span><br><span class="line"><span class="comment"># 正确率为19.799890 %</span></span><br><span class="line"><span class="comment"># feature_columns = [&#x27;DISTRICT&#x27;,&#x27;REPORTING_AREA&#x27;,&#x27;SHOOTING&#x27;,&#x27;MONTH&#x27;,&#x27;Season&#x27;,&#x27;DAY_OF_WEEK&#x27;,&#x27;dayofweek&#x27;, &#x27;HOUR&#x27;,&#x27;Day&#x27;,&#x27;Night&#x27;,&#x27;Lat&#x27;,&#x27;Long&#x27;]</span></span><br><span class="line"><span class="comment"># target_column = &#x27;UCR_PART&#x27;</span></span><br><span class="line"><span class="comment"># 正确率为52.408029 %</span></span><br><span class="line"></span><br><span class="line">x_train = train[feature_columns].values</span><br><span class="line">y_train = train[target_column].values</span><br><span class="line">x_test = test[feature_columns].values</span><br><span class="line">y_test = test[target_column].values</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化模型</span></span><br><span class="line"><span class="comment"># xgb_classifier = xgb.XGBClassifier(n_estimators=20,max_depth=4,learning_rate=0.1, subsample=0.7, colsample_bytree=0.7)</span></span><br><span class="line"></span><br><span class="line">xgb_classifier = xgb.XGBClassifier(objective=<span class="string">&#x27;multi:softprob&#x27;</span>,eta=<span class="number">0.1</span>,silent=<span class="number">0</span>,num_class=<span class="number">39</span>,eval_metric=<span class="string">&#x27;mlogloss&#x27;</span>,</span><br><span class="line">                <span class="comment">#学习速率</span></span><br><span class="line">                <span class="comment"># learning_rate =0.1,</span></span><br><span class="line">                <span class="comment"># n_estimators=1000,</span></span><br><span class="line">                <span class="comment"># 树结构相关的</span></span><br><span class="line">                max_depth=<span class="number">8</span>,</span><br><span class="line">                min_child_weight=<span class="number">1</span>,</span><br><span class="line">                gamma=<span class="number">0</span>,</span><br><span class="line">                reg_alfa=<span class="number">0.05</span>,</span><br><span class="line">                subsample=<span class="number">0.8</span>,</span><br><span class="line">                colsample_bytree=<span class="number">0.8</span>,</span><br><span class="line">                <span class="comment"># 其他</span></span><br><span class="line">                max_delta_step=<span class="number">1</span>,</span><br><span class="line">                seed=<span class="number">123</span>)</span><br><span class="line"><span class="comment"># 拟合模型</span></span><br><span class="line">xgb_classifier.fit(x_train, y_train)</span><br><span class="line"></span><br><span class="line"><span class="comment"># xgb_classifier.save_model(&#x27;UCR_PART.model&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># xgb_classifier=xgb.XGBClassifier()</span></span><br><span class="line"><span class="comment"># xgb_classifier.load_model(&#x27;OFFENSE_CODE_GROUP_xgb.model&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用模型预测</span></span><br><span class="line">preds = xgb_classifier.predict(x_test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断准确率</span></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&#x27;正确率为%f&#x27;</span> %((preds==y_test).<span class="built_in">sum</span>()/<span class="built_in">float</span>(y_test.shape[<span class="number">0</span>])*<span class="number">100</span>),<span class="string">&#x27;%&#x27;</span>)</span><br></pre></td></tr></table></figure><p>可以看到通过xgboost预测的训练集正确率可以达到35.657373 %使用模型进行测试集预测会更高，当然调参也是很重要的，调参前和调参后虽然只提升了5%，主要还是因为电脑配置不够，哈哈哈哈</p><p>当时我傻傻的尝试用5000颗树和0.01的学习效率来搭建一个模型，结果一个模型跑了一晚上都没有跑出来</p><p><img src="https://cdn.jsdelivr.net/gh//aq8sunjie/cdn@main/img/cover/K2L.jpg" alt="img"></p><p>然后只能无奈终结了程序，早知道当时丢到服务器上跑去了。</p><p>先写这些吧，我要去写我的毕业设计去了。</p><p>bye~~~</p></div><div class="single-reward"><div class="reward-open">赏<div class="reward-main"><ul class="reward-row"><li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/custom/donate/zhifubao.PNG"></li><li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/custom/donate/weixin.PNG"></li></ul></div></div></div><div style="text-align:center;width:100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div><footer class="post-footer"><div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div><div class="post-tags"></div><div class="post-share"><div class="social-share sharehidden share-component"></div><i class="iconfont show-share icon-forward"></i></div></footer></article><div class="toc" style="background:0 0"></div><section class="post-squares nextprev"><div class="post-nepre half previous"><a href="/2020/12/28/%E4%BD%BF%E7%94%A8XGBoost%E8%BF%9B%E8%A1%8C%E7%8A%AF%E7%BD%AA%E9%A2%84%E6%B5%8B%EF%BC%88%E8%B0%83%E5%8F%82%E7%AF%87%EF%BC%89/" rel="prev"><div class="background"><img class="lazyload" src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/20201228143053.png" style="width:100%;height:100%;object-fit:cover;pointer-events:none" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/cover/20201228143053.png"></div><span class="label">Previous Post</span><div class="info"><h3>使用xgboost进行犯罪预测（调参篇）</h3><hr></div></a></div><div class="post-nepre half next"><a href="/2020/12/02/Git%E6%89%8B%E5%86%8C%E9%80%9F%E6%9F%A5/" rel="next"><div class="background"><img class="lazyload" src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/pic/20201202141848.png" style="width:100%;height:100%;object-fit:cover;pointer-events:none" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/pic/20201202141848.png"></div><span class="label">Next Post</span><div class="info"><h3>Git手册速查——转载</h3><hr></div></a></div></section><section class="author-profile"><div class="info" itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/touxiang/logo.jpg" itemprop="image" alt="一只傻老杰" height="70" width="70"></a><div class="meta"><span class="title">Author</span><h3 itemprop="name"><a href="" itemprop="url" rel="author">一只傻老杰</a></h3></div></div><hr><p><i class="iconfont icon-write"></i></p></section></main></div></div></div><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="请输入关键词..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",CATEGORIES:"分类",TAGS:"标签"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><footer id="colophon" class="site-footer" role="contentinfo"><div class="site-info"><div class="footertext">2020</div><div class="footer-device"><p style="font-family:Ubuntu,sans-serif"><span style="color:#b9b9b9">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color:#b9b9b9;text-decoration:underline dotted rgba(0,0,0,.1)">Sakura</a> <i class="iconfont icon-sakura rotating" style="color:pink;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color:#b9b9b9;text-decoration:underline dotted rgba(0,0,0,.1)">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color:#b9b9b9;text-decoration:underline dotted rgba(0,0,0,.1)">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</span></p></div><span style="color:#ccc;padding-left:20px"><i class="fa fa-clock-o" aria-hidden="true"></i> <span id="time" align="center">载入时间中...</span><script>var now=new Date;function createtime(){var n=new Date("2020-11-22 17:20:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("time").innerHTML="小站已经苟活 "+dnum+" 天 "+hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script><span style="color:#ccc;padding-left:20px"><i class="fa fa-eye" aria-hidden="true"></i>访问量: <span id="busuanzi_value_site_pv"></span>次</span></span></div><div class="skin-menu no-select" id="mainskin" style="position:fixed"><div class="theme-controls row-container"><ul class="menu-list"><li id="white-bg"><i class="fa fa-television" aria-hidden="true"></i></li><li id="sakura-bg"><i class="iconfont icon-sakura"></i></li><li id="gribs-bg"><i class="fa fa-slack" aria-hidden="true"></i></li><li id="KAdots-bg"><i class="iconfont icon-dots"></i></li><li id="totem-bg"><i class="fa fa-optin-monster" aria-hidden="true"></i></li><li id="pixiv-bg"><i class="iconfont icon-pixiv"></i></li><li id="bing-bg"><i class="iconfont icon-bing"></i></li><li id="dark-bg"><i class="fa fa-moon-o" aria-hidden="true"></i></li></ul></div><div class="font-family-controls row-container"><button type="button" class="control-btn-serif selected" data-mode="serif" onclick="mashiro_global.font_control.change_font()">Serif</button> <button type="button" class="control-btn-sans-serif" data-mode="sans-serif" onclick="mashiro_global.font_control.change_font()">Sans Serif</button></div></div><canvas id="night-mode-cover"></canvas><div class="changeSkin-gear no-select"><div class="keys" id="setbtn"><span id="open-skinMenu">切换壁纸 | SCHEME TOOL &nbsp;<i class="iconfont icon-gear inline-block rotating"></i></span></div></div></footer><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/sakura.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Yafine/cdn@2.5/source/js/fireworks.js"></script><script src="https://cdn.jsdelivr.net/gh/cungudafa/cdn@2.1.2/js/cursor.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/piao.js" type="text/javascript"></script><script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script><script type="text/javascript" src="/js/lib.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script type="text/javascript" src="/js/InsightSearch.js"></script><script type="text/javascript" src="/js/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/zoom.min.js"></script><script type="text/javascript" src="/js/sakura-app.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@1.3.4/dist/Valine.min.js"></script><script src="/js/botui.js"></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script type="text/javascript">var Poi;Poi=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?{pjax:"1",movies:{url:"https://cdn.jsdelivr.net/gh/honjun/hojun@1.2",name:"Unbroken.mp4",live:"close"},windowheight:"fixed",codelamp:"close",ajaxurl:"",order:"asc",formpostion:"bottom"}:{pjax:"1",movies:{url:"https://cdn.jsdelivr.net/gh/honjun/hojun@1.2",name:"Unbroken.mp4",live:"open"},windowheight:"auto",codelamp:"close",ajaxurl:"",order:"asc",formpostion:"bottom"}</script><script>$(document).ready(function(){var o;0<$(".toc").length&&1200<document.body.clientWidth&&(0<$(".pattern-center").length?tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:!0,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-400,scrollSmoothOffset:-85}):tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:!0,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-85,scrollSmoothOffset:-85}),o=$(".toc").offset().top-95,window.onscroll=function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;o<=t?$(".toc").addClass("toc-fixed"):$(".toc").removeClass("toc-fixed")})})</script><script>!function(e,t,o,a,c,i,n){e.DaoVoiceObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=+new Date,i=t.createElement(o),n=t.getElementsByTagName(o)[0],i.async=1,i.src=a,i.charset="utf-8",n.parentNode.insertBefore(i,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/f6b2a0b1.js","daovoice"),daovoice("init",{app_id:"6f3ad2f5"}),daovoice("update")</script><div class="openNav no-select" style="height:50px"><div class="iconflat no-select" style="width:50px;height:50px"><div class="icon"></div></div><div class="site-branding search-form-submit"><i class="iconfont js-toggle-search iconsearch icon-search"></i></div></div></section><div id="mo-nav"><div class="m-avatar"><img src="https://cdn.jsdelivr.net/gh/aq8sunjie/cdn@main/img/touxiang/logo.jpg"></div><p style="text-align:center;color:#333;font-weight:900;font-family:Ubuntu,sans-serif;letter-spacing:1.5px">さくら荘その老杰のBlog</p><p style="text-align:center;word-spacing:20px"><a href="https://github.com/aq8sunjie" class="fa fa-github" target="_blank" style="color:#333;margin-left:20px"></a> <a href="https://weibo.com/6499966482/profile?rightmod=1&wvr=6&mod=personinfo" class="fa fa-weibo" target="_blank" style="color:#dd4b39;margin-left:20px"></a> <a href="https://wpa.qq.com/msgrd?v=3&uin=1205368550&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color:#25c6fe;margin-left:20px"></a></p><ul id="menu-new-1" class="menu"><li><a href="/"><span class="faa-parent animated-hover"><i class="fa fa-fort-awesome faa-shake" aria-hidden="true"></i> 首页</span></a></li><li><a href="/archives"><span class="faa-parent animated-hover"><i class="fa fa-archive faa-shake" aria-hidden="true"></i> 归档</span></a><ul class="sub-menu"><li><a href="/categories/%E6%8A%80%E6%9C%AF/"><i class="fa fa-code" aria-hidden="true"></i> 技术</a></li><li><a href="/categories/%E7%94%9F%E6%B4%BB/"><i class="fa fa-file-text-o" aria-hidden="true"></i> 生活</a></li><li><a href="/categories/%E8%B5%84%E6%BA%90/"><i class="fa fa-cloud-download" aria-hidden="true"></i> 资源</a></li><li><a href="/categories/%E9%9A%8F%E6%83%B3/"><i class="fa fa-commenting-o" aria-hidden="true"></i> 随想</a></li><li><a href="/categories/%E8%BD%AC%E8%BD%BD/"><i class="fa fa-book" aria-hidden="true"></i> 转载</a></li></ul></li><li><a href="javascript:;"><span class="faa-parent animated-hover"><i class="fa fa-list-ul faa-vertical" aria-hidden="true"></i> 清单</span></a><ul class="sub-menu"><li><a href="/bangumi/"><i class="fa fa-film faa-vertical" aria-hidden="true"></i> 番组</a></li><li><a href="/music/"><i class="fa fa-headphones" aria-hidden="true"></i> 歌单</a></li><li><a href="/photos/"><i class="fa fa-photo" aria-hidden="true"></i> 图集</a></li></ul></li><li><a href="/comment/"><span class="faa-parent animated-hover"><i class="fa fa-pencil-square-o faa-tada" aria-hidden="true"></i> 留言板</span></a></li><li><a href="/links/"><span class="faa-parent animated-hover"><i class="fa fa-link faa-shake" aria-hidden="true"></i> 友人帐</span></a></li><li><a href="/donate/"><span class="faa-parent animated-hover"><i class="fa fa-heart faa-pulse" aria-hidden="true"></i> 赞赏</span></a></li><li><a href="/"><span class="faa-parent animated-hover"><i class="fa fa-leaf faa-wrench" aria-hidden="true"></i> 关于</span></a><ul class="sub-menu"><li><a href="/about/"><i class="fa fa-meetup" aria-hidden="true"></i> 我？</a></li></ul></li><li><a href="/atom.xml"><span class="faa-parent animated-hover"><i class="fa fa-rss faa-pulse" aria-hidden="true"></i> RSS</span></a></li></ul><p style="text-align:center;font-size:13px;color:#b9b9b9">&copy 2019 hexo-sakura</p></div><button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display:none"><i class="fa fa-chevron-up" aria-hidden="true"></i></button><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><style>.aplayer .aplayer-lrc{height:35px}.aplayer .aplayer-lrc p{font-size:16px;font-weight:700;line-height:18px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{color:#ff1493}.aplayer.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed .aplayer-lrc{display:none}.aplayer .aplayer-lrc.aplayer-lrc-hide{display:none!important}.aplayer.aplayer-fixed .lrc-show{display:block;background:rgba(255,255,255,.8)}</style><meting-js></meting-js><script>$(function(){$("body").on("click",".aplayer",function(){$(".aplayer-button").hasClass("aplayer-play")?$(".aplayer-lrc").removeClass("lrc-show"):$(".aplayer-lrc").addClass("lrc-show")})})</script></body></html>